{% extends 'base.html' %}

{% block title %}Поиск новостей{% endblock %}

{% block content %}
<div class="container">
    <h1 class="my-4">Поиск новостей</h1>

    <form method="get" class="mb-4">
        <div class="row g-3">
            <div class="col-md-4">
                <label for="id_title" class="form-label">Название</label>
                <input type="text" name="title" class="form-control" id="id_title"
                       value="{{ form.title.value|default:'' }}" placeholder="Поиск по названию">
            </div>
            <div class="col-md-4">
                <label for="id_author" class="form-label">Автор</label>
                <input type="text" name="author" class="form-control" id="id_author"
                       value="{{ form.author.value|default:'' }}" placeholder="Поиск по автору">
            </div>
            <div class="col-md-4">
                <label for="id_date_after" class="form-label">Дата публикации (после)</label>
                <input type="date" name="date_after" class="form-control" id="id_date_after"
                       value="{{ form.date_after.value|default:'' }}">
            </div>
        </div>
        <button type="submit" class="btn btn-primary mt-3">Искать</button>
    </form>

    {% if search_performed %}
        <h2 class="my-4">Результаты поиска</h2>

        {% if page_obj.object_list %}
            <div class="list-group">
                {% for news in page_obj %}
                <div class="list-group-item mb-3">
                    <div class="d-flex justify-content-between">
                        <h5>
                            <a href="{% url 'news_detail' news.id %}" class="text-decoration-none">
                                {{ news.title }}
                            </a>
                        </h5>
                        <small class="text-muted">{{ news.pub_date|date:"d.m.Y H:i" }}</small>
                    </div>
                    <p class="mb-1">{{ news.content|truncatechars:200 }}</p>
                    <small class="text-muted">
                        Автор: {% if news.author %}{{ news.author.username }}{% else %}Неизвестен{% endif %}
                    </small>
                </div>
                {% endfor %}
            </div>

            {% include 'pagination.html' %}
        {% else %}
            <div class="alert alert-info">По вашему запросу ничего не найдено.</div>
        {% endif %}
    {% endif %}
</div>
{% endblock %}